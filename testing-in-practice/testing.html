<!DOCTYPE HTML>
<html>
		<head>
				<meta charset="utf-8" />
				<meta name="viewport" content="width=1024" />
				<meta name="description" content="Denne presentasjonen reflekterer over behovene for testing og går i praktiske detaljer på hvordan man bør teste." />
				<meta name="author" content="Tommy Bø" />
				<link href="testing.css" rel="stylesheet" type="text/css"/>
				<link rel="shortcut icon" href="favicon.ico" />
				<title>Testing</title>
		</head>

		<body class="impress-not-supported">

				<div id="impress">

						<div class="step">
								<div class="slide">
										<div class="title">
												<h1>Testing (IRL)</h1>
												<h3>Et innblikk i hvordan testing praktiseres i moderne prosjekt</h3>
												<h4>Et foredrag av Tommy Bø</h4>
										</div>
								</div>
						</div>

						<div class="step">
								<div class="slide">
										<h2>Litt tørre fakta om meg</h2>
										<ul>
												<li>Utdannet ved dph/NITH</li>
												<li>10 års erfaring innen systemutvikling</li>
												<li>Har jobbet i Visma Consulting siden 2008</li>
												<li>Fortid i Politiets Datakrimsenter og Finn.no</li>
												<li>Har hatt oppdrag for Statens Landbruksforvaltning, Wilhelmsen, NAV og Skatteetaten</li>
												<li>Fagmanager for faggruppen Software Craftsmanship</li>
										</ul>
								</div>
						</div>

						<div class="step">
								<div class="slide">
										<h2>Hvorfor teste?</h2>
										<ul>
												<li>Verifisere funksjonalitet</li>
												<li>Tidlig feedback</li>
												<li>Hindre endringer som bryter forventet oppførsel</li>
												<li>Fjerne frykt for å endre kode</li>
										</ul>
								</div>
						</div>

						<div class="step">
								<div class="slide">
										<h2>Variasjon av testing</h2>
										<ul>
												<li>
														Mange måter å teste på<br>
														Blackbox, whitebox, automatisert, manuelt,
														enhetstesting, systemtesting, ytelsestesting osv
												</li>
												<li>
														Mange verktøy<br>
														JUnit, TestNG, Mockito, Cucumber, Fitnesse, Hamcrest, 
														AssertJ (Fest Assert), Pitest, Jacoco, Maven, Jenkins
												</li>
												<li>
														Lett å miste oversikt<br>
														Viktig å standardisere hvilke verktøy som brukes og
														hvordan testene skal struktureres.
												</li>
										</ul>
								</div>
						</div>
						<div class="step">
								<div class="slide">
										<h2>Enhetstest:</h2>
										<ul>
												<li>
														Testing av logiske enheter: <br>
														Dette er tester på laveste nivå som tester enkle metoder, klasser eller små sett med klasser.
														Disse testene tar som regel minimalt med tid å kjøre og man kan teste enorme mengder i løpet av veldig kort tid.
												</li>
												<li>
														Integrasjonstester (Databasetester): <br>
														Tester integrasjonmot eksterne komponenter, da som regel databaser eller andre lagringsmedier.
														Disse testene tar lengre tid å kjøre og man har som regel behov for en del oppsett før man kan kjøre dem.
														Det er også et krav å ha databasen tilgjengelig ved kjøring.
												</li>
												<li>
														Komponenttester: <br>
														I komponenttester tester man som regel samhandlig mellom egen kode og komponenter/rammeverk man benytter.
														Disse testene krever et minimalt oppsett for rammeverket før man kan kjøre testene og det vil
														variere hvor lang tid disse testene tar.
												</li>
										</ul>
								</div>
						</div>
						<div class="step">
								<div class="slide">
										<h2>Systemtest:</h2>
										<ul>
												<li>
														Testing av system i reelt miljø: <br>
														Dette er tester som kjører mot et system etter at det er pakket og tilgjengeliggjort i et miljø.
														Testene vil som regel integrere mot systemet via forskjellige nettverksprotokoller som http pg rmi.
														Systemtestene er blackbox-tester som kaller utfører en operasjon og validerer output fra denne.
												</li>
												<li>
														Systemintegrasjonstester: <br>
														Disse testene er like som systemtester, men krever også at tilstøtende systemer er tilgjengelige.
												</li>
												<li>
														Ytelsestester: <br>
														Dette er tester som tester ytelsen i systemet. Testene kan være av alle typer, men det er vanlig at
														hovedvekten er tester som setter systemet under høy last.
												</li>
										</ul>
								</div>
						</div>
						<div class="step">
								<div class="slide">
										<h2>Testfordeling</h2>
										<img src="testfordelingstriangel.png" alt="figur som viser hvordan man bør fokusere tester" style="margin-top: -2em;"/>
								</div>
						</div>
						<div class="step">
								<div class="slide">
										<h2>Design for test</h2>
										<ul>
												<li>
														Designpatterns: Strategier man kan følge som vil gi
														effektiv og vedlikeholdbar programvare. De aller fleste
														av disse strategiene vil også føre til at kodebasen blir
														enklere å teste. Høy sammenheng/Lav kobling, Builders,
														Factory, Proxy og Observer er eksempler på patterns som 
														vil gi gode forutsetninger for å teste kode i isolasjon.
												</li>
												<li>
														Test-first: Ved å skrive testene før man skriver koden vil man bygge
														koden ut fra tiltenkt bruk i stedet for å bruke tid på
														synsing. Man vil også igjennom denne metoden bygge koden
														testbar fra starten.
												</li>
												<li>
														Separation of concerns: Dette er egentlig mye av det 
														samme som Høy sammenheng/Lav kobling.
														Ved å eksternalisere kode til egne klasser blir selv de mest bortgjemte
														funksjonene enkle å teste. Spesielt algoritmer som har mange utfall
														kan være greie å trekke ut.
												</li>
										</ul>
								</div>
						</div>
						<div class="step">
								<div class="slide">
										<h2>Test-driven Development</h2>
										I TDD har man fokus på å aktivt bruke testene for å forme koden.
										Testbar kode henger tett sammen med vedlikeholdbar og endringsvillig
										kode. I tillegg til at man har fokus på testing ønsker man også å
										stimulere til kompetansedeling og samarbeid via parprogrammering.
										Det er fortsatt mange som tenker at man får gjort mer dersom to utviklere
										jobber på separate oppgaver, men min erfaring tilsier det motsatte.
										Utfordringer som kommer frem underveis blir fortere løst igjennom
										drøfting, og man får et mer stimulerende arbeidsmiljø. Man bidrar
										til å trekke hverandre opp kompetansemessig og over tid vil man
										oppleve at man får en enhetlig kode hvor gode id&#233;er og gode
										konvensjoner blir videreført.
								</div>
						</div>
						<div class="step">
								<div class="slide">
										<h2>Teknikker for å begrense scope for testing</h2>
										<ul>
												<li>Trekk ut kode i egne klasser. Små enhetlige klasser er lette å teste</li>
												<li>Bruk tester til å avdekke kompleksitet. </li>
												<li>Eliminer så mye kompleksitet som mulig</li>
												<li>Bruk testerstatninger dersom det er vanskelig å teste kode</li>
												<li>Unngå verifisering inn i nøstede objekt ved bruk av mocks.</li>
										</ul>
								</div>
						</div>
						<div class="step">
								<div class="slide">
										<h2>Bruk utviklingsverktøyet</h2>
										IntelliJ: Veldig bra<br>
										Eclipse: Ikke like bra<br>
										NetBeans: Outsider, men min favoritt<br><br>
										Lær snarveiene i editoren (skriv ut shortcut-kort):
										<ul>
												<li>Navigere mellom klasser</li>
												<li>Åpne klasse</li>
												<li>Kjør test</li>
												<li>Trekk ut metode</li>
												<li>Trekk ut konstant</li>
												<li>Trekk ut variabel</li>
												<li>Flytt linje</li>
												<li>Andre refaktoreringer</li>
										</ul>
								</div>
						</div>
						<div class="step">
								<div class="slide">
										<h2>Testerstatninger</h2>
										<ul>
												<li>
														Mocks brukes for å begrense handlingsforløpet i en test.
														Ved mocking bruker man forhåndskonfigurerte returverdier og på den måten
														kan ha et kontrollert utfall av testen. Man kan legge opp til å verifisere
														at spesifikke metoder er kjørt, men dette bør begrenses til det minimale da
														det gjør refaktorering vanskeligere.
												</li>
												<li>
														Stubs er et minimalt implementert objekt som har predefinerte returverdier,
														eller som sporer hvilke operasjoner som er utført.
												</li>
												<li>
														Fakes er fungerende objekter som replikerer de objektene som vil brukes
														under normal kjøring, men som ikke (nødvendigvis) utfører de oppgavene
														disse objektene har. Ofte brukes fakes til å redusere avhengigheter til
														databaser, eksterne tjenester osv.
												</li>
										</ul>
										<a href="http://martinfowler.com/articles/mocksArentStubs.html" target="_blank">
												http://martinfowler.com/articles/mocksArentStubs.html
										</a>
								</div>
						</div>
						<div class="step">
								<div class="slide">
										<h2>Testdekning</h2>
										<p>
												Testdekning er et begrep som brukes når man beskriver hvor mye av koden
												som blir kjørt under testing. Dekningsgraden gir en indikasjon på
												hvor godt testet koden er, og hvor komfortabel man kan være med å endre
												koden. JaCoCo er det vektøyet som er mest utbredt ved kjøring på java7+,
												mens man tidligere benyttet cobertura eller emma.
										</p>
										<p>
												Testrapporter som genereres vil gi god oversikt over hvilke deler av systemet
												som trenger fokus og hvilke deler som er dekket. Man kan også konfigurere IDE-en
												til å måle og vise testdekning direkte i kildekoden.
										</p>
								</div>
						</div>
						<div class="step">
								<div class="slide">
										<h2>Mutasjonstesting</h2>
										<p>
												Testdekning er som nevnt en indikasjon på hvor godt koden er testet,
												men vi har ingen garantier for at testene validerer returverdier og
												verifiserer forventet oppførsel. Ved mutasjonstesting vil man bedre
												kunne måle hvor stor del av koden som faktisk blir verifisert av testene.
										</p>
										<p>
												Ved mutasjonstesting bruker man et rammeverk som manipulerer objektene vi har
												i kodebasen. Hvert statement blir forsøkt manipulert og etter hver manipulering
												vil alle testene kjøre. Dersom noen av testene feiler vil mutasjon bli eliminert,
												men dersom ingen av testene feiler har mutasjonen overlevd. Mutasjonene utføres 
												sekvensielt, og flere mutasjoner kan gjennomføres for hvert statement. Det innebærer
												at kjøring mot en stor kodebase kan ta lang tid, men hvis man ser at mutasjonsdekning
												og testdekning følger hverandre kan man bruke testdekningen som veiledning.
										</p>
								</div>
						</div>
						<div class="step">
								<div class="slide">
										<h2>Testing av legacy code</h2>
										<p>
												Som utvikler vil man noen ganger jobbe med gammel kode. Gammel kode
												blir referert til som legacy code (arvet kode). Gamle systemer ble 
												gjerne utviklet i en tid hvor testing ikke ble utført på samme måte
												som i dag. Det var lite fokus på automatisert testing og kodebasen
												bærer preg av dette.
										</p>
										<p>
												I en slik kodebase er det viktig å gjøre grep
												for å få koden mer testbar. Det innebærer at når man skal endre
												funksjonalitet skriver man tester på den eksisterende koden før man
												gjør endringer. Deretter kan man refaktorere koden etter behov slik at
												den blir enklere å jobbe med og samtidig mer testbar. Utfør så de ønskede
												funksjonelle endringene. Ved en slik arbeidsprosess vil man over tid fornye
												kodebasen og gjennomføre modernisering igjennom vanlig vedlikehold.
										</p>
								</div>
						</div>
						<div class="step">
								<div class="slide">
										<h2>Reprodusering av bugs</h2>
										<p>
												Selv hvor iherdig man tester et system vil det alltid dukke opp bugs.
												Det man bør gjøre da er å skrive en test som reproduserer bugen før
												man retter den slik at man ikke risikerer å innføre den på nytt.
												Det er få ting som gir et så stort inntrykk av uproffesjonalitet
												og udugelighet som når man opplever at samme feil oppstår gang på gang.
										</p>
								</div>
						</div>
						<div class="step">
								<div class="slide">
										<h2>Spesification by example</h2>
										<p>
												TDD og testing generelt har blitt veldig utbredt og mange har
												begynt å strekke seg lenger i hvordan man gjennomfører automatisert
												testing. En av disse veiene er Spesification by example. Denne
												arbeidsmetoden baserer seg på at løsningsarkitekter og annet
												personell som er med på å spesifisere løsningen gjør dette
												igjennom et spesifikasjonsspråk som heter Gherkin. Dette språket
												blir tolket direkte igjennom verktøy som Cucumber og gjennomført
												som en egen test. På denne måten blir løsningsspesifikasjonen direkte
												testbar og avvik mellom løsningskrav og implementasjon blir minimal.
										</p>
										<p style="font-style: italic;">
												Gitt et brev adressert til Hanne Hansen, Gateveien 1, 0177 OSLO<br>
												Når brevet kommer inn til fordelingssentralen<br>
												Så skal brevet distribueres til Bakkeby postkontor.<br>
										</p>
								</div>
						</div>
						<div class="step">
								<div class="slide">
									<h1>Oppgave:</h1>
									<a href="http://osherove.com/tdd-kata-1/">http://osherove.com/tdd-kata-1/</a>
								</div>
						</div>
						<div class="step">
								<div class="slide motto-pic-1">
								</div>
						</div>
				</div>


				<script src="impress.js"></script>
				<script src="impress-slide-setup.js"></script>
				<script src="slide-setup.js"></script>
		</body>
</html>